@model List<Product>

@{
    ViewData["Title"] = "Danh sách sản phẩm đã lọc";
}


<div class="stuff" style="margin: 20px 0px 100px;">
    <div class="content-header container">
        <nav aria-label="breadcrumb" class="breadcrumb-des">
            <ol class="breadcrumb">
                <li class="breadcrumb-item"><a href="#" class="breadcrumb-item-title">Trang chủ</a></li>
                <li class="breadcrumb-item active breadcrumb-item-des" aria-current="page">Danh sách sản phẩm nước hoa</li>
            </ol>
            <hr>
        </nav>
    </div>
    <div class="content-nd container">
        <div class="row">
            <div class="content-leftbar col-3">
                <div class="leftbar-title">Bộ lọc</div>
                <div class="leftbar-des">Giúp lọc nhanh sản phẩm mà bạn tìm kiếm</div>
                <hr>
                <form method="get" class="form-filter" id="form-filter-id" asp-action="Filter" asp-asp-controller="Product">
                    <div class="leftbar-btn">
                        <input type="submit" value="Áp dụng" class="btn btn-outline-dark btn-submit">
                        <input type="reset" value="Reset" class="btn btn-outline-dark btn-reset">
                    </div>

                    <input type="hidden" name="page" value="@ViewBag.CurrentPage" />

                    <div class="accordion filter" id="Filter">
                        @*Giá sản phẩm*@
                        <div class="accordion-item">
                            <h2 class="accordion-header" id="panelsStayOpen-headingOne">
                                <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#panelsStayOpen-collapseOne" aria-expanded="true" aria-controls="panelsStayOpen-collapseOne">
                                    Giá sản phẩm
                                </button>
                            </h2>
                            <div id="panelsStayOpen-collapseOne" class="accordion-collapse collapse show" aria-labelledby="panelsStayOpen-headingOne">
                                <div class="accordion-body">
                                    <div class="form-check">
                                        <input class="form-check-input" type="radio" name="priceSortOrder" id="priceSortOrderLowToHigh" value="asc" checked="false">
                                        <label class="form-check-label" for="priceSortOrderLowToHigh">
                                            Giá từ thấp đến cao
                                        </label>
                                    </div>
                                    <div class="form-check">
                                        <input class="form-check-input" type="radio" name="priceSortOrder" id="priceSortOrderHighToLow" value="desc" checked="false">
                                        <label class="form-check-label" for="priceSortOrderHighToLow">
                                            Giá từ cao xuống thấp
                                        </label>
                                    </div>
                                </div>
                            </div>
                        </div>

                        @*Thương hiệu*@
                        <div class="accordion-item">
                            <h2 class="accordion-header" id="panelsStayOpen-headingTwo">
                                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#panelsStayOpen-collapseTwo" aria-expanded="true" aria-controls="panelsStayOpen-collapseTwo">
                                    Thương hiệu
                                </button>
                            </h2>
                            <div id="panelsStayOpen-collapseTwo" class="accordion-collapse collapse show" aria-labelledby="panelsStayOpen-headingTwo">
                                <div class="accordion-body">
                                    @foreach (var item in ViewBag.CategoryNames)
                                    {
                                        <div class="form-check">
                                            <input class="form-check-input" type="checkbox" name="brand" id="@item.Category_ID" value="@item.Category_ID">
                                            <label class="form-check-label" for="@item.Category_ID">
                                                @item.Category_Name
                                            </label>
                                        </div>
                                    }
                                </div>
                            </div>
                        </div>

                        @*Giới tính*@
                        <div class="accordion-item">
                            <h2 class="accordion-header" id="panelsStayOpen-headingThree">
                                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#panelsStayOpen-collapseThree" aria-expanded="true" aria-controls="panelsStayOpen-collapseThree">
                                    Giới tính
                                </button>
                            </h2>
                            <div id="panelsStayOpen-collapseThree" class="accordion-collapse collapse show" aria-labelledby="panelsStayOpen-headingThree">
                                <div class="accordion-body">
                                    @foreach (var item in ViewBag.GenderProduct)
                                    {
                                        <div class="form-check">
                                            <input class="form-check-input" type="checkbox" name="gender" id="@item" value="@item">
                                            <label class="form-check-label" for="@item">
                                                @item
                                            </label>
                                        </div>
                                    }
                                </div>
                            </div>
                        </div>

                        @*Dung tích*@
                        <div class="accordion-item">
                            <h2 class="accordion-header" id="panelsStayOpen-headingFour">
                                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#panelsStayOpen-collapseFour" aria-expanded="true" aria-controls="panelsStayOpen-collapseFour">
                                    Dung tích
                                </button>
                            </h2>
                            <div id="panelsStayOpen-collapseFour" class="accordion-collapse collapse show" aria-labelledby="panelsStayOpen-headingFour">
                                <div class="accordion-body">
                                    @foreach (var item in ViewBag.VolumeProduct)
                                    {
                                        <div class="form-check">
                                            <input class="form-check-input" type="checkbox" name="capacity" id="@item" value="@item">
                                            <label class="form-check-label" for="@item">
                                                @item
                                            </label>
                                        </div>
                                    }
                                </div>
                            </div>
                        </div>

                        @*Xuất xứ*@
                        <div class="accordion-item">
                            <h2 class="accordion-header" id="panelsStayOpen-heading5">
                                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#panelsStayOpen-collapse5" aria-expanded="true" aria-controls="panelsStayOpen-collapse5">
                                    Xuất xứ
                                </button>
                            </h2>
                            <div id="panelsStayOpen-collapse5" class="accordion-collapse collapse show" aria-labelledby="panelsStayOpen-heading5">
                                <div class="accordion-body">
                                    @foreach (var item in ViewBag.OriginProduct)
                                    {
                                        <div class="form-check">
                                            <input class="form-check-input" type="checkbox" name="original" id="@item" value="@item">
                                            <label class="form-check-label" for="@item">
                                                @item
                                            </label>
                                        </div>
                                    }
                                </div>
                            </div>
                        </div>
                    </div>
                </form>
            </div>
            <div class="content-rightbar col-9">
                <div class="rightbar-title alert @ViewBag.Alert" role="alert">
                    @ViewBag.Message
                </div>
                <div class="row">
                    @foreach (var item in @Model)
                    {
                        <div class="col-lg-3 product-trending">
                            <div class="card-product-page">
                                <img src="~/img/img-product/@item.Product_ID-01.png" class="card-img-top" alt="Sản phẩm 01">
                                <div class="card-body">
                                    <h1 class="card-title-brand">@item.Category.Category_Name</h1>
                                    <h3 class="card-title-productName">@item.Product_Name</h3>
                                    <span class="card-product-price">@item.Product_Price.ToString("C0").Replace(",", ".").Substring(1)<span> ₫</span></span>
                                    <h4 class="card-product-gender">Nước hoa cho @item.Product_Gender.ToLower()</h4>
                                    <a asp-controller="Product" asp-action="Detail" asp-route-id="@item.Product_ID" class="btn btn-outline-success card-view-detail">Xem chi tiết</a>
                                </div>
                            </div>
                        </div>
                    }
                </div>
                @*<nav aria-label="Page navigation example" class="nav-paging">
                    <ul class="pagination">
                        @for (int i = 1; i <= ViewBag.TotalPages; i++)
                        {
                            if (i == ViewBag.CurrentPage)
                            {
                                <li class="page-item"><a class="page-link">@i</a></li>
                            }
                            else
                            {
                                <li class="page-item"><a class="page-link" asp-route-page="@i" asp-route-priceSortOrder="@ViewBag.PriceSortOrder" asp-route-brand="@ViewBag.Brand" asp-route-gender="@ViewBag.Gender" asp-route-capacity="@ViewBag.Capacity" asp-route-original="@ViewBag.Original" asp-controller="Product">@i</a></li>
                            }
                        }

                    </ul>
                    @{
                        var routeValues = new System.Web.Routing.RouteValueDictionary(ViewContext.RouteData.Values);
                        var queryString = Request.QueryString;

                        foreach (string key in queryString.Keys)
                        {
                            if (!string.IsNullOrEmpty(key))
                            {
                                routeValues[key] = queryString[key];
                            }
                        }
                    }

                    <ul class="pagination">
                        @for (int i = 1; i <= ViewBag.TotalPages; i++)
                        {
                            routeValues["page"] = i;
                            <li class="page-item">
                                <a class="page-link" href="@Url.Action("Filter", routeValues)">@i</a>
                            </li>
                        }
                    </ul>

                </nav>*@
            </div>
        </div>
    </div>
</div>